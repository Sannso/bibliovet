import{h as d,y as p}from"./hooks.module.DpvEAJYN.js";import{l as v}from"./preact.module.mNte_dLy.js";let o=[],s=0;const _=4;let y=i=>{let n=[],e={get(){return e.lc||e.listen(()=>{})(),e.value},lc:0,listen(l){return e.lc=n.push(l),()=>{for(let r=s+_;r<o.length;)o[r]===l?o.splice(r,_):r+=_;let t=n.indexOf(l);~t&&(n.splice(t,1),--e.lc||e.off())}},notify(l,t){let r=!o.length;for(let f of n)o.push(f,e.value,l,t);if(r){for(s=0;s<o.length;s+=_)o[s](o[s+1],o[s+2],o[s+3]);o.length=0}},off(){},set(l){let t=e.value;t!==l&&(e.value=l,e.notify(t))},subscribe(l){let t=e.listen(l);return l(e.value),t},value:i};return e};function m(i,n,e){let l=new Set([...n,void 0]);return i.listen((t,r,f)=>{l.has(f)&&e(t,r,f)})}const b=y(99),k=y({});function I(i,n={}){let[,e]=d({}),[l]=d(i.get());return p(()=>{l!==i.get()&&e({})},[]),p(()=>{let t,r,f,u=()=>{t||(t=1,r=setTimeout(()=>{t=void 0,e({})}))};return n.keys?f=m(i,n.keys,u):f=i.listen(u),()=>{f(),clearTimeout(r)}},[i,""+n.keys]),i.get()}var g=0;function S(i,n,e,l,t,r){n||(n={});var f,u,c=n;if("ref"in c)for(u in c={},n)u=="ref"?f=n[u]:c[u]=n[u];var a={type:i,props:c,key:e,ref:f,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:--g,__i:-1,__u:0,__source:t,__self:r};if(typeof i=="function"&&(f=i.defaultProps))for(u in f)c[u]===void 0&&(c[u]=f[u]);return v.vnode&&v.vnode(a),a}export{I as a,k as b,b as t,S as u};
