import{h as d,y as v}from"./hooks.module.DxH44NtO.js";import{l as p}from"./preact.module.Bl_WOuGg.js";let o=[],s=0;const _=4;let y=i=>{let t=[],e={get(){return e.lc||e.listen(()=>{})(),e.value},lc:0,listen(l){return e.lc=t.push(l),()=>{for(let f=s+_;f<o.length;)o[f]===l?o.splice(f,_):f+=_;let n=t.indexOf(l);~n&&(t.splice(n,1),--e.lc||e.off())}},notify(l,n){let f=!o.length;for(let r of t)o.push(r,e.value,l,n);if(f){for(s=0;s<o.length;s+=_)o[s](o[s+1],o[s+2],o[s+3]);o.length=0}},off(){},set(l){let n=e.value;n!==l&&(e.value=l,e.notify(n))},subscribe(l){let n=e.listen(l);return l(e.value),n},value:i};return e};function m(i,t,e){let l=new Set([...t,void 0]);return i.listen((n,f,r)=>{l.has(r)&&e(n,f,r)})}const b=y(99),k=y({});function I(i,t={}){let[,e]=d({}),[l]=d(i.get());return v(()=>{l!==i.get()&&e({})},[]),v(()=>{let n,f,r,u=()=>{n||(n=1,f=setTimeout(()=>{n=void 0,e({})}))};return t.keys?r=m(i,t.keys,u):r=i.listen(u),()=>{r(),clearTimeout(f)}},[i,""+t.keys]),i.get()}var g=0;function S(i,t,e,l,n,f){t||(t={});var r,u,c=t;if("ref"in c)for(u in c={},t)u=="ref"?r=t[u]:c[u]=t[u];var a={type:i,props:c,key:e,ref:r,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:--g,__i:-1,__u:0,__source:n,__self:f};if(typeof i=="function"&&(r=i.defaultProps))for(u in r)c[u]===void 0&&(c[u]=r[u]);return p.vnode&&p.vnode(a),a}export{I as a,k as b,b as t,S as u};
